<!DOCTYPE html>
<html lang="en">
<head>
    <title>Siya</title>
    <link rel="stylesheet" href="{{url_for('static',filename='css/chat.css')}}">
    <script src={{url_for('static',filename='javascript/jquery.js')}}></script>
	</head>
<body>
<div class="message_box">
<div id="chatbox" class="message_logs">
     <div id="botdiv2"><img id="botPhoto" src="{{url_for('static',filename='images/Bot1.jpg')}}"></img></div>
     <div id="botdiv"><p id="botmsg" class="botText">Hello, I am Siya. <br> How may I help You.. </p></div>

</div>
<div id="userInput" class="chat-form">
    <textarea type="text" id="inp" placeholder="Enter message" name="msg"></textarea>
    <button type="submit" id="buttonInp" value="send">Send</button>
</div>
</div>
</body>
<script>
var input = document.getElementById("inp");
input.addEventListener("keyup", function(event) {
  if (event.keyCode === 13) {
   event.preventDefault();
   document.getElementById("buttonInp").click();
   document.getElementById("inp").value="";
  }
});
function getBotResponse()
{

var rawText=$("#inp").val();
if(rawText.trim()=="")
{
alert("Please type a message");
return false;
}
var userHtml='<div id="userdiv2"><img id="userPhoto" src="{{url_for('static',filename='images/User1.jpg')}}"></img></div>'
+'<div id="userdiv"><p id="usermsg" class="userText">'+rawText +' </p></div>'
//var userHtml='<div id="userdiv"><div id="userdiv2"><img id="userPhoto" src="{{url_for('static',filename='images/User1.jpg')}}"></img><p id="usermsg" class="userText">'+rawText+'</p></div></div>';
$("#inp").val("");
$("#chatbox").append(userHtml);
document.getElementById("userInput").scrollIntoView({block:'start',behaviout:'smooth'});

$.get("/getResponse",{msg:rawText}).done(function(data){
var botHtml='<div id="botdiv2"><img id="botPhoto" src="{{url_for('static',filename='images/Bot1.jpg')}}"></img></div><div id="botdiv"><p id="botmsg" class="botText">'+data+ '</p></div>'

//var botHtml='<div id="botdiv"><div id="botdiv2"><img id="botPhoto" src="{{url_for('static',filename='images/Bot1.jpg')}}"></img><p id="botmsg" class="botText">'+data+'</p></div></div>';
$("#chatbox").append(botHtml);
document.getElementById('userInput').scrollIntoView({block:'start',behaviour:'smooth'});
});


}

$("#buttonInp").click(function(){getBotResponse();});


</script>
</html>